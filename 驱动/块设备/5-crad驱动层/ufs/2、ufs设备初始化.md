### 1、概述

ufs设备的初始化分为三个阶段：部分初始化、加载启动代码（option）、初始化完成

### 2、三个启动阶段

- 1、部分初始化

```
1、该阶段应该在刚上电的时候进行，该阶段应该完成M-PHY（物理层）和Unipro（数据链路层）的初始化
2、该阶段完成之后主机可以通过传输层给ufs设备发送命令
	READ命令
	TEST UNIT READY命令：主机查询设备是否准备好
3、主机也可以通过设备管理器访问设备描述符（Device Deor），获取设备配置信息

备注：在高通平台该阶段应该在xbl中进行
```

- 2、加载启动代码

```
如果启动代码存储在UFS设备上，才会有这一段代码

在第一步的初始化完成之后，主机可以通过设备管理器访问设备描述符，获取bBootLunEn属性，该属性说明了启动代码在UFS设备的哪个LU中
```



- 3、初始化完成

```
在完成了上面两步之后。主机会通过设备管理器给UFS设备发送命令设置fDeviceInit = 1，设置完之后，主机会一直发命令查询该标志，同时UFS设备继续进行初始化，当初始化完成设置fDeviceInit = 0，表名UFS设备可以响应任何ufs命令
```

